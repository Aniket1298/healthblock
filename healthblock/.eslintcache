[{"C:\\Users\\kumar\\major-project\\healthblock\\src\\index.js":"1","C:\\Users\\kumar\\major-project\\healthblock\\src\\App.js":"2","C:\\Users\\kumar\\major-project\\healthblock\\src\\reportWebVitals.js":"3","C:\\Users\\kumar\\major-project\\healthblock\\src\\healthblock.js":"4","C:\\Users\\kumar\\major-project\\healthblock\\src\\register.js":"5","C:\\Users\\kumar\\major-project\\healthblock\\src\\upload.js":"6","C:\\Users\\kumar\\major-project\\healthblock\\src\\reports.js":"7"},{"size":714,"mtime":1609237763925,"results":"8","hashOfConfig":"9"},{"size":1845,"mtime":1609237718346,"results":"10","hashOfConfig":"9"},{"size":362,"mtime":499162500000,"results":"11","hashOfConfig":"9"},{"size":2245,"mtime":1609007885002,"results":"12","hashOfConfig":"9"},{"size":2127,"mtime":1609236523294,"results":"13","hashOfConfig":"9"},{"size":3809,"mtime":1609250315146,"results":"14","hashOfConfig":"9"},{"size":2696,"mtime":1609322626525,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"18","usedDeprecatedRules":"19"},"1eenzkk",{"filePath":"20","messages":"21","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"22","usedDeprecatedRules":"19"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"19"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"30","usedDeprecatedRules":"19"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":1,"source":"33","usedDeprecatedRules":"19"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\kumar\\major-project\\healthblock\\src\\index.js",["36"],"  \nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport { Route, Link, BrowserRouter as Router } from 'react-router-dom';\nimport reportWebVitals from './reportWebVitals';\nimport RegisterPage from './register'\nimport UploadPage from './upload'\nimport ReportsPage from './reports'\nconst routing = (\n  <Router>\n    <div>\n      <Route exact path=\"/\" component={App} />\n      <Route exact path=\"/register\" component={RegisterPage} />\n      <Route exact path=\"/upload\" component={UploadPage} />\n      <Route exact path=\"/reports\" component={ReportsPage} />\n    </div>\n  </Router>\n)\nReactDOM.render(routing, document.getElementById('root'))\n\n\n\nreportWebVitals();\n",["37","38"],"C:\\Users\\kumar\\major-project\\healthblock\\src\\App.js",["39","40","41","42","43","44"],"import logo from './logo.svg';\nimport './App.css'\nimport Healthblock from './build/contracts/Healthblock.json'\nimport Web3 from 'web3'\n\nimport Button from '@material-ui/core/Button';\n\nimport React, { Component } from 'react'\nimport { useHistory } from \"react-router-dom\";\nimport { withRouter } from 'react-router';\nimport web3obj from './healthblock'\nimport RegisterPage from './register'\nimport UploadPage from './upload'\n\nclass App extends Component {\n  async componentDidMount() {\n    \n    const obj = new web3obj()\n    await obj.loadWeb3()\n    await obj.loadBlockchainData()\n    this.obj=obj\n    if (obj.user){ \n      console.log(\"AACCCUNT\",obj.account,\"Name\",obj.user.name)\n    this.setState({ account: obj.account })\n    this.setState({user:obj.user.name})\n    this.setState({role:obj.user.role})\n    \n    } \n    else{\n      this.props.history.push({pathname:'/register',obj:this.obj})\n      }\n    }\n  constructor(props) {\n    super(props)\n    this.state = {\n      user:null,\n      role:null,\n      account: '',\n      loading: true,\n    }\n    this.obj=null;\n  }\n  onUpload(event){\n    this.props.history.push({pathname:'/upload',obj:this.obj})\n\n  }\n\n  render() {\n    return (\n      <div className=\"HomePage\" style={{marginLeft:\"40%\",marginTop:\"5%\",}}>\n        <h3>{this.state.account}</h3>\n        <h3> Name  {this.state.user}</h3>\n        <h3> Role  {this.state.role}</h3>\n        <Button onClick={()=> this.props.history.push({pathname:'/upload',obj:this.obj})} variant=\"contained\" color=\"primary\" href=\"#contained-buttons\">\n        Upload Report\n      </Button>\n      <br></br>\n      <br></br>\n      <Button onClick={()=> this.props.history.push({pathname:'/reports',obj:this.obj})} variant=\"contained\" color=\"primary\" href=\"#contained-buttons\">\n        Reports\n      </Button>\n      </div>\n    );\n  }\n}\nexport default withRouter(App);\n","C:\\Users\\kumar\\major-project\\healthblock\\src\\reportWebVitals.js",[],"C:\\Users\\kumar\\major-project\\healthblock\\src\\healthblock.js",["45","46"],"  \r\nimport Web3 from 'web3'\r\nimport Healthblock from './build/contracts/Healthblock.json'\r\nexport default class web3obj{\r\n    constructor(){\r\n        this.account=''\r\n        this.contract=null\r\n        this.user=null\r\n    \r\n      }\r\n      async upload(title,hash){\r\n        await this.contract.methods.uploadReport(title,hash).send({from:this.account})\r\n      }\r\n\r\n    async register(name,role){\r\n      if (role===\"Doctor\"){\r\n        await this.contract.methods.register(name,1).send({from:this.account})\r\n\r\n    }\r\n    else{\r\n        await this.contract.methods.register(name,0).send({from:this.account})\r\n    }\r\n    }\r\n    async loadWeb3() {\r\n        if (window.ethereum) {\r\n          window.web3 = new Web3(window.ethereum)\r\n          await window.ethereum.enable()\r\n        }\r\n        else if (window.web3) {\r\n          window.web3 = new Web3(window.web3.currentProvider)\r\n        }\r\n        else {\r\n          window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!')\r\n        }\r\n      }\r\n    \r\n      async loadBlockchainData() {\r\n        const web3 = window.web3\r\n        // Load account\r\n        const accounts = await web3.eth.getAccounts()\r\n        this.account=accounts[0]\r\n        console.log(\"ACCOUNT HERE  IS\",accounts[0],this.account)\r\n        const networkId = await web3.eth.net.getId()\r\n        const networkData = Healthblock.networks[networkId]\r\n        \r\n        console.log(networkId)\r\n        console.log(networkData)\r\n        if(networkData) {\r\n          const contract = new web3.eth.Contract(Healthblock.abi, networkData.address)\r\n          this.contract = contract\r\n          console.log(\"Contract\",contract.methods)\r\n          const hello = await contract.methods.name().call()\r\n          console.log(\"Address\",this.account)\r\n          //await contract.methods.register(\"doctor5\",1).send({from:this.account})\r\n          const data = await contract.methods.getProfile(this.account).call()\r\n          console.log(\"DATA\",data)\r\n          var user=null\r\n          if (data[0]!=\" \"){\r\n              user={\"name\":data[0],\"role\":data[1]}\r\n          }\r\n          this.user=user\r\n        } else {\r\n          window.alert('Healthblock contract not deployed to detected network.')\r\n        }\r\n    }   \r\n}","C:\\Users\\kumar\\major-project\\healthblock\\src\\register.js",["47","48","49"],"import logo from './logo.svg';\r\nimport './App.css'\r\nimport React, { Component } from 'react'\r\nimport web3obj from './healthblock'\r\nimport { withRouter } from 'react-router';\r\nimport {Form} from 'react-bootstrap'\r\nclass RegisterPage extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            role:'Patient',\r\n            name:'',\r\n            errors:'',\r\n        }  \r\n        this.handleSubmit=this.handleSubmit.bind(this)\r\n        this.nameChange=this.nameChange.bind(this)\r\n        this.roleChange=this.roleChange.bind(this)\r\n    }\r\n    nameChange(event){\r\n        this.setState({name:event.target.value})\r\n        console.log(this.state.name,event.target.value)\r\n    }\r\n    roleChange(event){\r\n        this.setState({role:event.target.value})\r\n        console.log(this.state.role,event.target.value) \r\n    }\r\n    async handleSubmit(event){\r\n        //await web3obj.register(this.state.name,this.state.role)\r\n        const obj = this.props.location.obj\r\n        alert(obj.account)\r\n        obj.register(this.state.name,this.state.role)\r\n        this.props.history.push('/')\r\n        }\r\n    \r\n    render(){\r\n        return(\r\n            <div className=\"register\">\r\n                <h1>{this.state.errors}</h1>\r\n                \r\n                <div className=\"row\">\r\n                    <form onSubmit={this.handleSubmit}>\r\n                        <label>\r\n                            Name:\r\n                        <input type=\"text\" onChange={this.nameChange} />\r\n                        </label>\r\n                        {\"         \"}\r\n                        <select onChange={this.roleChange}>\r\n                        <option value=\"Patient\">Patient</option>\r\n                            <option value=\"Doctor\">Doctor</option>\r\n                            \r\n                        </select>\r\n                        {\"         \"}\r\n                        <input type=\"submit\" value=\"Submit\" />\r\n                    </form>                   \r\n                </div>      \r\n            </div>  \r\n            \r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(RegisterPage);\r\n","C:\\Users\\kumar\\major-project\\healthblock\\src\\upload.js",["50","51","52","53","54"],"import logo from './logo.svg';\r\nimport './App.css'\r\nimport React, { Component } from 'react'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { withRouter } from 'react-router';\r\nimport {Form} from 'react-bootstrap'\r\nimport web3obj from './healthblock'\r\nconst ipfsClient = require('ipfs-http-client')\r\nconst ipfs = ipfsClient({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' })\r\n\r\nclass UploadPage extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            report_name:null,\r\n            buffer:null,\r\n            name:null,\r\n            role:null,\r\n            account:null,\r\n        }\r\n        \r\n        this.uploadReport=this.uploadReport.bind(this)\r\n        this.captureFile = this.captureFile.bind(this)\r\n        this.setData= this.setData  .bind(this)\r\n        this.setData()\r\n    }\r\n    async setData(){\r\n      const obj = new web3obj()\r\n      await obj.loadWeb3()\r\n      await obj.loadBlockchainData()\r\n      const contract = obj.contract\r\n      var account = obj.account\r\n      this.setState({name:obj.user.name,role:obj.user.role,account:obj.account})\r\n      const count = await contract.methods.report_count().call()\r\n      console.log(\"REPORT COUNT\",count)\r\n      const files = await contract.methods.reportlist(0).call()\r\n      console.log(\"FILES and\")\r\n      console.log(files)\r\n      console.log(files.reports)\r\n\r\n    }\r\n    captureFile = event => {\r\n        event.preventDefault()\r\n        const file = event.target.files[0]\r\n        const reader = new window.FileReader()\r\n        reader.readAsArrayBuffer(file)\r\n    \r\n        reader.onloadend = () => {\r\n          this.setState({ buffer: Buffer(reader.result) })\r\n          console.log('buffer', this.state.buffer)\r\n        }\r\n      }\r\n    async uploadReport (title) {\r\n      console.log(\"IPFS\",ipfs)\r\n        const obj = new web3obj()\r\n        await obj.loadWeb3()\r\n        await obj.loadBlockchainData()\r\n        const contract = obj.contract\r\n        console.log(\"Submitting file to IPFS...\")\r\n        console.log(contract)\r\n        var account = obj.account\r\n        alert(account)\r\n        const file =await ipfs.add(this.state.buffer, (error, result) => {\r\n          console.log('IPFS result', result)\r\n          if(error) {\r\n            console.error(error)\r\n            return\r\n          }\r\n      })\r\n      console.log(file)\r\n      console.log(file.path)\r\n      const hash= file.path\r\n      console.log(\"HASH\")\r\n      console.log(title,hash)\r\n      await obj.upload(title,hash)\r\n      this.props.history.push(\"/\")\r\n      }\r\n      render(){\r\n          return(\r\n          <div className=\"uploadReport\" style={{marginLeft:\"40%\",marginTop:\"7%\", }}>\r\n            <h3>Address {this.state.account}</h3>\r\n            <h3>Name  {this.state.name}</h3>\r\n            <h3>Role {this.state.role}</h3>\r\n              <h5><b>Upload Report  </b></h5>\r\n            <form onSubmit={(event) => {\r\n              event.preventDefault()\r\n              const title = this.report_name.value\r\n              this.uploadReport(title)\r\n            }} >\r\n              &nbsp;\r\n              <input type='file' accept=\".jpg,.pdf,.png,.jpg,.jpeg\" onChange={this.captureFile} style={{ width: '250px' }} />\r\n                <div className=\"form-group mr-sm-2\">\r\n                  <input\r\n                    id=\"videoTitle\"\r\n                    type=\"text\"\r\n                    ref={(input) => { this.report_name = input }} \r\n                    className=\"form-control-sm\"\r\n                    placeholder=\"Title...\"\r\n                    required />\r\n                </div>\r\n              <button type=\"submit\" className=\"btn btn-danger btn-block btn-sm\">Upload!</button>\r\n              &nbsp;\r\n            </form>\r\n              </div>\r\n          );\r\n      }\r\n    \r\n}\r\nexport default withRouter(UploadPage);\r\n","C:\\Users\\kumar\\major-project\\healthblock\\src\\reports.js",["55","56","57","58","59","60"],{"ruleId":"61","severity":1,"message":"62","line":6,"column":17,"nodeType":"63","messageId":"64","endLine":6,"endColumn":21},{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","replacedBy":"68"},{"ruleId":"61","severity":1,"message":"69","line":1,"column":8,"nodeType":"63","messageId":"64","endLine":1,"endColumn":12},{"ruleId":"61","severity":1,"message":"70","line":3,"column":8,"nodeType":"63","messageId":"64","endLine":3,"endColumn":19},{"ruleId":"61","severity":1,"message":"71","line":4,"column":8,"nodeType":"63","messageId":"64","endLine":4,"endColumn":12},{"ruleId":"61","severity":1,"message":"72","line":9,"column":10,"nodeType":"63","messageId":"64","endLine":9,"endColumn":20},{"ruleId":"61","severity":1,"message":"73","line":12,"column":8,"nodeType":"63","messageId":"64","endLine":12,"endColumn":20},{"ruleId":"61","severity":1,"message":"74","line":13,"column":8,"nodeType":"63","messageId":"64","endLine":13,"endColumn":18},{"ruleId":"61","severity":1,"message":"75","line":52,"column":17,"nodeType":"63","messageId":"64","endLine":52,"endColumn":22},{"ruleId":"76","severity":1,"message":"77","line":58,"column":22,"nodeType":"78","messageId":"79","endLine":58,"endColumn":24},{"ruleId":"61","severity":1,"message":"69","line":1,"column":8,"nodeType":"63","messageId":"64","endLine":1,"endColumn":12},{"ruleId":"61","severity":1,"message":"80","line":4,"column":8,"nodeType":"63","messageId":"64","endLine":4,"endColumn":15},{"ruleId":"61","severity":1,"message":"81","line":6,"column":9,"nodeType":"63","messageId":"64","endLine":6,"endColumn":13},{"ruleId":"61","severity":1,"message":"69","line":1,"column":8,"nodeType":"63","messageId":"64","endLine":1,"endColumn":12},{"ruleId":"61","severity":1,"message":"72","line":4,"column":10,"nodeType":"63","messageId":"64","endLine":4,"endColumn":20},{"ruleId":"61","severity":1,"message":"81","line":6,"column":9,"nodeType":"63","messageId":"64","endLine":6,"endColumn":13},{"ruleId":"82","severity":1,"message":"83","line":24,"column":23,"nodeType":"84","messageId":"85","endLine":24,"endColumn":42,"fix":"86"},{"ruleId":"61","severity":1,"message":"87","line":32,"column":11,"nodeType":"63","messageId":"64","endLine":32,"endColumn":18},{"ruleId":"61","severity":1,"message":"69","line":1,"column":8,"nodeType":"63","messageId":"64","endLine":1,"endColumn":12},{"ruleId":"61","severity":1,"message":"72","line":4,"column":10,"nodeType":"63","messageId":"64","endLine":4,"endColumn":20},{"ruleId":"61","severity":1,"message":"81","line":6,"column":9,"nodeType":"63","messageId":"64","endLine":6,"endColumn":13},{"ruleId":"88","severity":1,"message":"89","line":13,"column":31,"nodeType":"90","endLine":13,"endColumn":46},{"ruleId":"76","severity":1,"message":"91","line":46,"column":23,"nodeType":"78","messageId":"79","endLine":46,"endColumn":25},{"ruleId":"76","severity":1,"message":"91","line":65,"column":23,"nodeType":"78","messageId":"79","endLine":65,"endColumn":25},"no-unused-vars","'Link' is defined but never used.","Identifier","unusedVar","no-native-reassign",["92"],"no-negated-in-lhs",["93"],"'logo' is defined but never used.","'Healthblock' is defined but never used.","'Web3' is defined but never used.","'useHistory' is defined but never used.","'RegisterPage' is defined but never used.","'UploadPage' is defined but never used.","'hello' is assigned a value but never used.","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","'web3obj' is defined but never used.","'Form' is defined but never used.","no-whitespace-before-property","Unexpected whitespace before property bind.","MemberExpression","unexpectedWhitespace",{"range":"94","text":"95"},"'account' is assigned a value but never used.","react/jsx-no-target-blank","Using target=\"_blank\" without rel=\"noreferrer\" is a security risk: see https://html.spec.whatwg.org/multipage/links.html#link-type-noopener","JSXAttribute","Expected '===' and instead saw '=='.","no-global-assign","no-unsafe-negation",[800,803],"."]